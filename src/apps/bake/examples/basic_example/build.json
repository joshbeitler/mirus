{
  "recipes": [
    {
      "name": "main",
      "sources": ["src/**/*.c"],
      "tools": {
        "compile": {
          "cmd": "clang",
          "args": [
            "-c",
            "{sources}",
            "-I",
            "./include",
            "-o",
            "{output_dir}/{output_file_stem}.o"
          ],
          "concurrent": true
        },
        "link": {
          "cmd": "clang",
          "args": ["src/**/*.o", "-o", "main"]
        }
      }
    },
    {
      "name": "tests",
      "sources": ["tests/*.c", "src/**/*.c"],
      "tools": {
        "compile": {
          "cmd": "clang",
          "args": ["-c", "{sources}", "-I", "./include"],
          "concurrent": true
        },
        "link": {
          "cmd": "clang",
          "args": ["tests/*.o", "src/**/*.o", "-o", "run_tests"]
        }
      },
      "dependencies": ["main"]
    }
  ]
}
